You are working inside an existing Next.js + React (TypeScript) project.

File to modify:
calculator.tsx

Context:
- The project already has a tab-based calculator UI.
- The "Affordability" calculator exists and uses ShadCN UI components.
- The current affordability logic uses a hard-coded 8% interest rate and allows 70% EMI usage.
- DO NOT redesign the UI.
- DO NOT break existing styles, layout, or calculations.
- Keep all existing inputs and outputs intact.

Goal:
Enhance ONLY the "Affordability Calculator" with the following improvements while remaining fully compatible with the current UI.

----------------------------------
REQUIRED FUNCTIONAL CHANGES
----------------------------------

1. Add an Interest Rate Slider
- Add a new state variable:
  affInterestRate (number)
- Default value: 8.5
- Allowed range: 6% to 12%
- Step size: 0.1
- Use a slider-style input (compatible with ShadCN UI or native range input if needed).
- Display the selected interest rate value clearly (e.g. "8.5%").

2. Improve Affordability Logic (Safe & Realistic)
Replace the current affordability calculation logic with the following:

- Disposable Income:
  disposableIncome = netMonthlyIncome - existingMonthlyEmis

- EMI Affordability Rule:
  Allow only 40% of disposable income for new EMI
  maxAffordableEmi = disposableIncome * 0.4

- Use the selected interest rate from the slider
  monthlyRate = affInterestRate / 12 / 100

- Loan tenure logic remains unchanged (20 / 25 / 30 years)

- Calculate loan amount using the EMI inversion formula:
  loanAmount =
    maxAffordableEmi *
    (( (1 + monthlyRate)^months - 1 ) /
     ( monthlyRate * (1 + monthlyRate)^months ))

- Affordable Property Price:
  propertyPrice = loanAmount + downPayment

3. Input Validation
- If disposable income ≤ 0 → show all results as ₹0
- If interest rate ≤ 0 or tenure ≤ 0 → show ₹0 results
- Prevent NaN or negative outputs

----------------------------------
UI REQUIREMENTS
----------------------------------

- Place the Interest Rate slider INSIDE the Affordability tab input card
- Position it logically below Loan Tenure
- Label text:
  "Interest Rate (%)"
- Show the current selected percentage beside or below the slider
- Match spacing, typography, and card structure with existing inputs
- Use the same currency formatter already present

----------------------------------
CODE STYLE RULES
----------------------------------

- Use TypeScript
- Follow existing naming conventions (affIncome, affEmi, affResults, etc.)
- Keep calculateAffordability() as the main logic function
- Add the new state to the existing useEffect dependency array
- Do NOT modify other calculators (Eligibility, Rent vs Buy, Smart EMI, etc.)

----------------------------------
FINAL OUTPUT EXPECTATION
----------------------------------

- Updated calculator.tsx
- Interest rate slider fully functional
- Affordability results update live when slider changes
- UI remains visually consistent with the rest of the app
- No console errors
- No breaking changes

Proceed step-by-step and ensure the calculator remains production-ready.
